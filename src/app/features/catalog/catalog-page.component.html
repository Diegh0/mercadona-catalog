<section class="catalog" aria-label="Catálogo">
  <div class="col left" aria-label="Columna izquierda">
    <h2 class="title">Categorías</h2>

    @if (store.loading()) {
      <div class="placeholder">Cargando categorías...</div>
    } @else {
      <app-category-list
        [categories]="store.categories()"
        [selectedCategoryId]="store.selectedCategoryId()"
        (selectCategory)="store.selectCategory($event)"
      />
    }
    @if (store.productPath().length > 0) {
      <h3 class="subtitle">Selección</h3>

      <div class="path">
        @for (p of store.productPath(); track p.id) {
          <div class="path-item">{{ p.name }}</div>
        }
      </div>
}

  </div>

<div class="col right" aria-label="Columna derecha">
  @if (store.selectedCategoryId() === null) {
    <div class="empty-state">Seleccione una categoría</div>
  } @else {
    <div class="right-header">
      <h2 class="title">Productos</h2>

      <app-back-button
        [visible]="store.hasProductSelected()"
        (back)="onBack()"
      />
      <button type="button" class="sort-btn" (click)="onToggleSort()">
      {{ store.sortConfig().filterName }} {{ sortArrow() }}
      </button>

    </div>

    <!-- BUSCADOR: -->
    @if (store.showSearch()) {
      <div class="search">
        <input
          type="text"
          class="search-input"
          placeholder="Buscar producto..."
          [value]="store.searchTerm()"
          (input)="store.searchTerm.set(($any($event.target)).value)"
        />

        @if (store.searchTerm().trim().length > 0 && store.searchTerm().trim().length < 3) {
          <div class="search-hint">Escribe al menos 3 caracteres</div>
        }
      </div>
    }

    <app-product-list
    [products]="store.rightProductsView()"
    (selectProduct)="onSelectProduct($event)"
    />

  }
</div>
</section>
